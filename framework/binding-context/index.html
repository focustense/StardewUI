
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://focustense.github.io/StardewUI/framework/binding-context/" rel="canonical"/>
<link href="../starml/" rel="prev"/>
<link href="../binding-events/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.40" name="generator"/>
<title>Binding Context - StardewUI Documentation</title>
<link href="../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../stylesheets/github-permalink-style.css" rel="stylesheet"/>
<link href="../../stylesheets/neoteroi-mkdocs.css" rel="stylesheet"/>
<link href="../../stylesheets/styles.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<meta content="website" property="og:type"/>
<meta content="Binding Context - StardewUI Documentation" property="og:title"/>
<meta content="None" property="og:description"/>
<meta content="https://focustense.github.io/StardewUI/assets/images/social/framework/binding-context.png" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="https://focustense.github.io/StardewUI/framework/binding-context/" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Binding Context - StardewUI Documentation" name="twitter:title"/>
<meta content="None" name="twitter:description"/>
<meta content="https://focustense.github.io/StardewUI/assets/images/social/framework/binding-context.png" name="twitter:image"/>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#binding-context">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="StardewUI Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="StardewUI Documentation">
<img alt="logo" src="../../images/logo-alt.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            StardewUI Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Binding Context
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="deep-orange" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="orange" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="deep-purple" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/focustense/StardewUI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    focustense/StardewUI
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          
  
    
  
  Home

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/">
          
  
    
  
  Getting started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../">
          
  
    
  
  Framework

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../library/">
          
  
    
  
  Library

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../reference/stardewui/">
          
  
    
  
  Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../examples/">
          
  
    
  
  Examples

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="StardewUI Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="StardewUI Documentation">
<img alt="logo" src="../../images/logo-alt.png"/>
</a>
    StardewUI Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/focustense/StardewUI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    focustense/StardewUI
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../getting-started/">
<span class="md-ellipsis">
    Getting started
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Framework
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Framework
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../starml/">
<span class="md-ellipsis">
    Stardew Markup Language (StarML)
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Binding Context
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Binding Context
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#context-vs-data">
<span class="md-ellipsis">
      Context vs Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-updates">
<span class="md-ellipsis">
      Source Updates
    </span>
</a>
<nav aria-label="Source Updates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-inotifypropertychanged">
<span class="md-ellipsis">
      Implementing INotifyPropertyChanged
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collection-updates">
<span class="md-ellipsis">
      Collection Updates
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redirects">
<span class="md-ellipsis">
      Redirects
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#update-ticks">
<span class="md-ellipsis">
      Update Ticks
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../binding-events/">
<span class="md-ellipsis">
    Binding Events
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../templates/">
<span class="md-ellipsis">
    Templates
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../included-views/">
<span class="md-ellipsis">
    Included Views
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../behaviors/">
<span class="md-ellipsis">
    Behaviors
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../duck-typing/">
<span class="md-ellipsis">
    Duck Typing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../focus-and-interaction/">
<span class="md-ellipsis">
    Focus and Interaction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../custom-data/">
<span class="md-ellipsis">
    Custom Data
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../extensions/">
<span class="md-ellipsis">
    Framework Extensions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dry-guide/">
<span class="md-ellipsis">
    The DRY Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../library/">
<span class="md-ellipsis">
    Library
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../reference/stardewui/">
<span class="md-ellipsis">
    Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../examples/">
<span class="md-ellipsis">
    Examples
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#context-vs-data">
<span class="md-ellipsis">
      Context vs Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-updates">
<span class="md-ellipsis">
      Source Updates
    </span>
</a>
<nav aria-label="Source Updates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-inotifypropertychanged">
<span class="md-ellipsis">
      Implementing INotifyPropertyChanged
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#collection-updates">
<span class="md-ellipsis">
      Collection Updates
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redirects">
<span class="md-ellipsis">
      Redirects
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#update-ticks">
<span class="md-ellipsis">
      Update Ticks
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="binding-context">Binding Context<a class="headerlink" href="#binding-context" title="Permanent link"></a></h1>
<p>StardewUI's framework API is based on <a href="../../concepts/#data-binding">data binding</a>. While the UI state or "widget tree" is retained, you don't interact it with it directly; instead, in order to provide interactivity and/or dynamic content to views, you define a <a href="https://en.wikipedia.org/wiki/Data_model">data model</a>, which becomes the <em>context</em>.</p>
<p>Context is simply a <a href="https://en.wikipedia.org/wiki/Tree_(abstract_data_type)">tree node</a> which contains the particular model/data for a specific view or position in the hierarchy. It provides access to the model itself, as well as <a href="#redirects">redirects</a>, which are important for building more complex UI. Other frameworks use similar names, such as <a href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.frameworkelement.datacontext?view=windowsdesktop-8.0">DataContext</a> in WPF.</p>
<h2 id="context-vs-data">Context vs Data<a class="headerlink" href="#context-vs-data" title="Permanent link"></a></h2>
<p>As an example, consider a simple list of selectable items:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="model-diagram" name="__tabbed_1" type="radio"><input id="ui-mockup" name="__tabbed_1" type="radio"><input id="starml" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="model-diagram">Model Diagram</label><label for="ui-mockup">UI Mockup</label><label for="starml">StarML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<pre class="mermaid"><code>classDiagram
direction LR
    class MenuViewModel {
        string Title
        List~MenuItem~ Items
        SelectItem(id)
    }
    class MenuItem {
        string Id
        string Text
        int Price
    }
    MenuViewModel *-- MenuItem
</code></pre>
</div>
<div class="tabbed-block">
<pre class="mermaid"><code>block-beta
columns 2
    A["Joey Jo-Jo Junior Shabadoo's Shop"]:2
    space:2
    B["Bread"] C["500"]
    D["Peanut Butter"] E["1200"]
    F["Strawberry Jam"] G["800"]
</code></pre>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">&lt;</span><span class="nt">lane</span> <span class="na">layout</span><span class="o">=</span><span class="s">"500px content"</span> <span class="na">orientation</span><span class="o">=</span><span class="s">"vertical"</span><span class="p">&gt;</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">font</span><span class="o">=</span><span class="s">"dialogue"</span> <span class="na">text</span><span class="o">=</span><span class="s">{Title}</span> <span class="p">/&gt;</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="p">&lt;</span><span class="nt">lane</span> <span class="err">*</span><span class="na">repeat</span><span class="o">=</span><span class="s">{Items}</span> <span class="na">click</span><span class="o">=</span><span class="s">|^SelectItem(Id)|</span><span class="p">&gt;</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">margin</span><span class="o">=</span><span class="s">"0, 0, 0, 32"</span> <span class="na">text</span><span class="o">=</span><span class="s">{Text}</span> <span class="p">/&gt;</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{Price}</span> <span class="p">/&gt;</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</input></input></input></div>
<p>The specific layout or exact appearance in game isn't important to this example; what we're focused on here are the <a href="../starml/#attribute-flavors">binding attributes</a> and <a href="../binding-events/">events</a>. Specifically, we have:</p>
<ul>
<li><code>text={Title}</code>, which is clearly referring to <code>MenuViewModel.Title</code></li>
<li><code>click=|^SelectItem(Id)|</code>, which refers to the same-named method on <code>MenuViewModel</code></li>
<li><code>text={Text}</code> and <code>text={Price}</code> which are referring, <em>not</em> to the <code>MenuViewModel</code> anymore, but to properties on the <code>MenuItem</code>.</li>
</ul>
<p>What happened? Although we only actually provided a single "model" (the <code>MenuViewModel</code>), the <em>context</em> changed as soon as <code>*repeat</code> was encountered. Repeaters replace the original binding context (<code>MenuViewModel</code>) with a context referring to the specific item in the collection (<code>MenuItem</code>). As far as those inner <code>&lt;label&gt;</code> elements are concerned, the "model" or "data" is actually <code>MenuItem</code>.</p>
<p>This behavior isn't necessarily limited to repeaters; for example, another way to narrow or drill down the context would be the <a href="../starml/#structural-attributes"><code>*context</code> attribute</a>.</p>
<p>But note the <code>click</code> event in particular: <code>^SelectItem(Id)</code>. The <code>Id</code> is a property on the <code>MenuItem</code>, as we would expect since it is attached to the repeating element; however, <code>SelectItem</code> is referring back to the <code>MenuViewModel</code>. It does this using the <code>^</code> <a href="#redirects">redirect</a>, which instructs StardewUI to look at the <em>parent</em> or <em>previous</em> context to find the <code>SelectItem</code> method.</p>
<p>The <em>model</em> or <em>data</em> refers to the specific object attached, or "bound", to any given node; the outer <code>&lt;lane&gt;</code> is bound to a <code>MenuViewModel</code> and each inner <code>&lt;lane&gt;</code> is bound to a <code>MenuItem</code>. The <em>context</em> has an awareness of the overall structure, and is able to backtrack to a previous level at any time.</p>
<h2 id="source-updates">Source Updates<a class="headerlink" href="#source-updates" title="Permanent link"></a></h2>
<p>It is rare for any UI to be completely static, with content that never changes. Most UI needs to respond not only to user input, but to changes in the underlying data or state. More generally, it should always show the <em>most current</em> data, however one chooses to define it.</p>
<div class="admonition failure">
<p class="admonition-title">Broken</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="c" name="__tabbed_2" type="radio"><input id="starml_1" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="c">C#</label><label for="starml_1">StarML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CounterViewModel</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="p">{</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Increment</span><span class="p">()</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="n">Count</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="p">&lt;</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">click</span><span class="o">=</span><span class="s">|Increment()|</span> <span class="na">text</span><span class="o">=</span><span class="s">"Add One"</span> <span class="p">/&gt;</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{Count}</span> <span class="p">/&gt;</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</input></input></div>
</div>
<p>If you run this example, and click the button, you'll see that <strong>nothing happens</strong>. Our <code>Count</code> does get incremented, but the UI never updates. That is because StardewUI's data binding depends on having an implementation of <a href="https://learn.microsoft.com/en-us/dotnet/api/system.componentmodel.inotifypropertychanged?view=net-8.0">INotifyPropertyChanged</a> (hereafter: "INPC") in order to detect changes. Without INPC, every binding is a "one-time" binding, meaning it is only read when the view is first created.</p>
<h3 id="implementing-inotifypropertychanged">Implementing <code>INotifyPropertyChanged</code><a class="headerlink" href="#implementing-inotifypropertychanged" title="Permanent link"></a></h3>
<p>INPC can be extremely tedious to implement for many models and properties, as it requires intercepting every property setter, comparing the values, raising an event, etc. Fortunately, the .NET ecosystem has many tools to automate the process, and using one is <strong>strongly</strong> recommended over a "manual" implementation.</p>
<p>The recommended options for INPC include:</p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Package</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>PropertyChanged.SourceGenerator</td>
<td><a href="https://www.nuget.org/packages/PropertyChanged.SourceGenerator"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M1.998.342a1.997 1.997 0 1 0 0 3.995 1.997 1.997 0 0 0 0-3.995m9.18 4.34a6.156 6.156 0 0 0-6.153 6.155v6.667c0 3.4 2.756 6.154 6.154 6.154h6.667c3.4 0 6.154-2.755 6.154-6.154v-6.667a6.154 6.154 0 0 0-6.154-6.155zm-1.477 2.8a2.496 2.496 0 1 1 0 4.993 2.496 2.496 0 0 1 0-4.993m7.968 6.16a3.996 3.996 0 1 1-.002 7.992 3.996 3.996 0 0 1 .002-7.992"></path></svg></span> NuGet</a></td>
<td><a href="https://github.com/canton7/PropertyChanged.SourceGenerator"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></span> GitHub</a></td>
</tr>
<tr>
<td>PropertyChanged.Fody</td>
<td><a href="https://www.nuget.org/packages/PropertyChanged.Fody/"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M1.998.342a1.997 1.997 0 1 0 0 3.995 1.997 1.997 0 0 0 0-3.995m9.18 4.34a6.156 6.156 0 0 0-6.153 6.155v6.667c0 3.4 2.756 6.154 6.154 6.154h6.667c3.4 0 6.154-2.755 6.154-6.154v-6.667a6.154 6.154 0 0 0-6.154-6.155zm-1.477 2.8a2.496 2.496 0 1 1 0 4.993 2.496 2.496 0 0 1 0-4.993m7.968 6.16a3.996 3.996 0 1 1-.002 7.992 3.996 3.996 0 0 1 .002-7.992"></path></svg></span> NuGet</a></td>
<td><a href="https://github.com/Fody/PropertyChanged"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></span> GitHub</a></td>
</tr>
</tbody>
</table>
<p>The author(s) of this guide and of StardewUI have no affiliation with any of the above projects; they are recommended on the basis of:</p>
<ul>
<li>
<p><img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:"> Leaving <strong>no footprint</strong>.</img></p>
<p>Although they are installed as packages, they do not add any new assemblies to your build output, meaning your INPC-enhanced mod can continue to be a single DLL;</p>
</li>
<li>
<p><img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:"> Handling <strong>dependent properties</strong> automatically.</img></p>
<p>For example, <code>public string FullName =&gt; $"{FirstName} {LastName}"</code> will raise notifications for changes to either <code>FirstName</code> or <code>LastName</code>.</p>
</li>
<li>
<p><img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:"/> Being <strong>free and open source</strong>, with a permissive license (MIT, Apache, etc.).<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
<p>In other words, their license imposes no requirements on <em>your</em> license, your ability to opt into Nexus Donation Points, etc.</p>
</li>
</ul>
<p>Using the first library (<code>PropertyChanged.SourceGenerator</code>), we can quickly convert the non-working example above to one that does work:</p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="c_1" name="__tabbed_3" type="radio"><input id="starml_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="c_1">C#</label><label for="starml_2">StarML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">PropertyChanged.SourceGenerator</span><span class="p">;</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="k">public</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CounterViewModel</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">{</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="na">[Notify]</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Increment</span><span class="p">()</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">        </span><span class="n">Count</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="p">&lt;</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">click</span><span class="o">=</span><span class="s">|Increment()|</span> <span class="na">text</span><span class="o">=</span><span class="s">"Add One"</span> <span class="p">/&gt;</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{Count}</span> <span class="p">/&gt;</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</input></input></div>
</div>
<p>Note that the markup has not changed at all. All we had to do for the C# code was:</p>
<ul>
<li>Add the <code>partial</code> keyword to the <code>CounterViewModel</code> class (required for code generation)</li>
<li>Change the <code>Count</code> auto-property to be a field</li>
<li>Make it lowerCamelCase, so it doesn't conflict with the auto-generated property</li>
<li>Add a <code>[Notify]</code> attribute.</li>
</ul>
<p>You don't need to <code>[Notify]</code> every single property, only the ones that might change. The mixed approach is demonstrated in several <a href="../../examples/bestiary/#monsterviewmodelcs">examples</a>.</p>
<h3 id="collection-updates">Collection Updates<a class="headerlink" href="#collection-updates" title="Permanent link"></a></h3>
<p>A special case of updates is collections. Consider the case of a UI that adds items to a list:</p>
<div class="admonition failure">
<p class="admonition-title">Broken</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="c_2" name="__tabbed_4" type="radio"><input id="starml_3" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="c_2">C#</label><label for="starml_3">StarML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">public</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TodoViewModel</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="p">{</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Items</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="na">[Notify]</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">currentItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AddCurrentItem</span><span class="p">()</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrWhitespace</span><span class="p">(</span><span class="n">CurrentItem</span><span class="p">))</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">            </span><span class="n">Items</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">CurrentItem</span><span class="p">);</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">            </span><span class="n">CurrentItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="p">&lt;</span><span class="nt">lane</span> <span class="na">layout</span><span class="o">=</span><span class="s">"500px content"</span> <span class="na">orientation</span><span class="o">=</span><span class="s">"vertical"</span><span class="p">&gt;</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="p">&lt;</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>        <span class="p">&lt;</span><span class="nt">textinput</span> <span class="na">text</span><span class="o">=</span><span class="s">{CurrentItem}</span> <span class="p">/&gt;</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">text</span><span class="o">=</span><span class="s">"Add"</span> <span class="na">click</span><span class="o">=</span><span class="s">|AddCurrentItem()|</span> <span class="p">/&gt;</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="err">*</span><span class="na">repeat</span><span class="o">=</span><span class="s">{Items}</span> <span class="na">text</span><span class="o">=</span><span class="s">{this}</span> <span class="p">/&gt;</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</input></div>
</div>
<p>If you run this, you'll observe that the text box is cleared when clicking "Add", but the item does not appear to be added to the list. Moreover, converting <code>Items</code> to a <code>[Notify]</code> will not help in this case, because the <em>field itself</em> has not changed. <code>Items</code> always points to the same <em>list</em>.</p>
<p>Before explaining the solution, it is worth noting the workarounds that should <strong>not</strong> be used, even if they appear to be effective at first:</p>
<ul>
<li>
<p><img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/274c.svg" title=":x:"/> Converting the <code>Items</code> list to <code>[Notify]</code> (or equivalent INPC) and replacing the entire list with a new list, e.g. <code>Items = Items.Append(CurrentItem).ToList()</code>.</p>
<p>This has quadratic or <a href="https://www.joelonsoftware.com/2001/12/11/back-to-basics/">Schlemiel the Painter</a> performance, in both time and memory.</p>
</li>
<li>
<p><img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/274c.svg" title=":x:"/> Leaving the list alone, but calling an <code>OnPropertyChanged</code> or <code>PropertyChanged?.Invoke</code> after adding an item, to force an INPC change notification.</p>
<p>While not as serious an offense as the previous version, it still forces StardewUI to rebuild the entire view tree for the <code>*repeat</code>. Even if only one item changed, it must recreate the views for all of them.</p>
</li>
</ul>
<p>All performance is relative, and these workarounds might be perfectly acceptable for our toy example above. However, if there are hundreds of items in the list, and each item has many views within—for example, an image, quality icon, quantity text, etc.—then making this type of change very often is still likely to cause jank.</p>
<p>StardewUI has a better solution: <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.specialized.inotifycollectionchanged?view=net-8.0"><code>INotifyCollectionChanged</code></a>, which is the collection-based counterpart to INPC. While "INCC" is also difficult to implement, you don't have to, because there is already an <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.observablecollection-1?view=net-8.0"><code>ObservableCollection</code></a> type to do it for you.</p>
<p>Using <code>ObservableCollection</code>, the revised and working code then becomes:</p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="c_3" name="__tabbed_5" type="radio"/><input id="starml_4" name="__tabbed_5" type="radio"/><div class="tabbed-labels"><label for="c_3">C#</label><label for="starml_4">StarML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">public</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TodoViewModel</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="p">{</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">ObservableCollection</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Items</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="na">[Notify]</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">currentItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AddCurrentItem</span><span class="p">()</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrWhitespace</span><span class="p">(</span><span class="n">CurrentItem</span><span class="p">))</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">            </span><span class="n">Items</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">CurrentItem</span><span class="p">);</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">            </span><span class="n">CurrentItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="p">&lt;</span><span class="nt">lane</span> <span class="na">layout</span><span class="o">=</span><span class="s">"500px content"</span> <span class="na">orientation</span><span class="o">=</span><span class="s">"vertical"</span><span class="p">&gt;</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>    <span class="p">&lt;</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>        <span class="p">&lt;</span><span class="nt">textinput</span> <span class="na">text</span><span class="o">=</span><span class="s">{CurrentItem}</span> <span class="p">/&gt;</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">text</span><span class="o">=</span><span class="s">"Add"</span> <span class="na">click</span><span class="o">=</span><span class="s">|AddCurrentItem()|</span> <span class="p">/&gt;</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>    <span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="err">*</span><span class="na">repeat</span><span class="o">=</span><span class="s">{Items}</span> <span class="na">text</span><span class="o">=</span><span class="s">{this}</span> <span class="p">/&gt;</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<p>We changed only one line here: <code>List&lt;string&gt;</code> became <code>ObservableCollection&lt;string&gt;</code>.</p>
<h2 id="redirects">Redirects<a class="headerlink" href="#redirects" title="Permanent link"></a></h2>
<p>Any binding that references context data, including properties or <a href="../binding-events/">event handlers</a> or arguments, can use a redirect operator.</p>
<p>The types of redirects are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Syntax</th>
<th>Example</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>Parent</td>
<td><code>^</code></td>
<td><code>^Prop</code></td>
<td>Goes back to the previous, or "parent" context.<br/><strong>Can be repeated.</strong></td>
</tr>
<tr>
<td>Ancestor</td>
<td><code>~Type</code></td>
<td><code>~Foo.Prop</code></td>
<td>Backtracks to the nearest ancestor of the specified type.<br/><strong>Cannot be repeated.</strong></td>
</tr>
</tbody>
</table>
<p>The following example will walk through the different redirects in more detail.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="c_4" name="__tabbed_6" type="radio"/><input id="starml_5" name="__tabbed_6" type="radio"/><input id="output" name="__tabbed_6" type="radio"/><div class="tabbed-labels"><label for="c_4">C#</label><label for="starml_5">StarML</label><label for="output">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">InventoryViewModel</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="p">{</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">OwnerName</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">PageViewModel</span><span class="w"> </span><span class="n">ActivePage</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">}</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">PageViewModel</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">{</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Category</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ItemViewModel</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Items</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="p">}</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="n">record</span><span class="w"> </span><span class="nf">ItemViewModel</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Name</span><span class="p">);</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="k">void</span><span class="w"> </span><span class="nf">ShowMenu</span><span class="p">()</span>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="p">{</span>
</span><span id="__span-9-17"><a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InventoryViewModel</span><span class="p">()</span>
</span><span id="__span-9-18"><a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-9-19"><a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">        </span><span class="n">OwnerName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Timmy"</span><span class="p">,</span>
</span><span id="__span-9-20"><a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">        </span><span class="n">ActivePage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">()</span>
</span><span id="__span-9-21"><a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-9-22"><a href="#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">            </span><span class="n">Category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Tools"</span><span class="p">,</span>
</span><span id="__span-9-23"><a href="#__codelineno-9-23" id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="w">            </span><span class="n">Items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="k">new</span><span class="p">(</span><span class="s">"Axe"</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="s">"Hoe"</span><span class="p">)]</span>
</span><span id="__span-9-24"><a href="#__codelineno-9-24" id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-9-25"><a href="#__codelineno-9-25" id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-9-26"><a href="#__codelineno-9-26" id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="w">    </span><span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-9-27"><a href="#__codelineno-9-27" id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="w">        </span><span class="n">viewEngine</span><span class="p">.</span><span class="n">CreateMenuFromAsset</span><span class="p">(</span><span class="s">"Mods/Xyz/Views/Inventory"</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>
</span><span id="__span-9-28"><a href="#__codelineno-9-28" id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="p">&lt;</span><span class="nt">lane</span> <span class="na">orientation</span><span class="o">=</span><span class="s">"vertical"</span> <span class="err">*</span><span class="na">context</span><span class="o">=</span><span class="s">{ActivePage}</span><span class="p">&gt;</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{^OwnerName}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{~InventoryViewModel.OwnerName}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>    <span class="p">&lt;</span><span class="nt">lane</span> <span class="err">*</span><span class="na">repeat</span><span class="o">=</span><span class="s">{Items}</span><span class="p">&gt;</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{Name}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{^Category}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{~PageViewModel.Category}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{^^OwnerName}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{~InventoryViewModel.OwnerName}</span> <span class="p">/&gt;</span>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a>    <span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="p">&lt;/</span><span class="nt">lane</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<pre class="mermaid"><code>block-beta
columns 5
    A["Timmy"]:5
    B["Timmy"]:5
    C1["Axe"]
    C2["Tools"]
    C3["Tools"]
    C4["Timmy"]
    C5["Timmy"]
    D1["Hoe"]
    D2["Tools"]
    D3["Tools"]
    D4["Timmy"]
    D5["Timmy"]
</code></pre>
</div>
</div>
</div>
<p>The above is not intended to represent any kind of realistic UI scenario, only to demonstrate what the different redirects do. It is important to realize that redirects do <strong>not</strong> navigate the actual model data; there is nothing in StardewUI, or anywhere else, that knows how to get from a <code>PageViewModel</code> back to its "parent" <code>InventoryViewModel</code>, and such a relationship may not exist or be meaningful at all.</p>
<p>Instead, we assign a context to each node:</p>
<div class="span-table-wrapper">
<table class="span-table dense">
<tr>
<td colspan="3">Node/Element</td>
<td>Has Context</td>
</tr>
<tr>
<td colspan="3"><code>&lt;lane orientation​=​"vertical"...&gt;</code></td>
<td><code>InventoryViewModel</code> ("Timmy")</td>
</tr>
<tr>
<td></td>
<td colspan="2"><code>&lt;label text={^OwnerName} /&gt;</code></td>
<td rowspan="3"><code>PageViewModel</code> ("Tools")</td>
</tr>
<tr>
<td></td>
<td colspan="3"><code>&lt;label text={~PageViewModel.OwnerName} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td colspan="2"><code>&lt;lane *repeat={Items}&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[1] &lt;label text={Name} /&gt;</code></td>
<td rowspan="5"><code>ItemViewModel</code> ("Axe")</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[1] &lt;label text={^Category} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[1] &lt;label text={~PageViewModel.Category} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[1] &lt;label text={^^OwnerName} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[1] &lt;label text={~InventoryViewModel.OwnerName} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[2] &lt;label text={Name} /&gt;</code></td>
<td rowspan="5"><code>ItemViewModel</code> ("Hoe")</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[2] &lt;label text={^Category} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[2] &lt;label text={~PageViewModel.Category} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[2] &lt;label text={^^OwnerName} /&gt;</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>[2] &lt;label text={~InventoryViewModel.OwnerName} /&gt;</code></td>
</tr>
</table>
</div>
<p>To resolve the <code>^^OwnerName</code> near the end of the above table:</p>
<ol>
<li>Walk up the parent <em>elements</em> until we find one that changed the context. Since <code>*repeat</code> has a context effect, the first parent is the <code>&lt;lane *repeat={Items}&gt;</code> element.</li>
<li>Repeat the process from that position, since there is a second <code>^</code>. Since the <code>&lt;lane orientation="vertical"&gt;</code> element has a <code>*context</code> modifier, it is chosen next.</li>
<li>Take the context data <em>linked to</em> the element we ended up at; the root <code>&lt;lane&gt;</code> is associated with the <code>InventoryViewModel</code>.</li>
<li>Read the property from the data we just found, i.e. <code>InventoryViewModel.OwnerName</code>.</li>
</ol>
<p>Resolving <code>~InventoryViewModel.OwnerName</code> follows a very similar process, but instead of going "up" a specific number of times (twice, for <code>^^</code>, or once, for a single <code>^</code>), it repeats the traversal step as many times as necessary until it reaches an element that has an <code>InventoryViewModel</code> as its context.</p>
<div class="admonition info">
<p class="admonition-title">Summary</p>
<p>The most important lesson to take away from this is that <strong>context redirects follow the document structure, not the data (model/view-model) structure.</strong></p>
<p>In an MV* design, document structure is itself usually based on the model, so you can <em>often</em> treat redirects as going to the "parent object", but may eventually run into scenarios where this doesn't work as expected.</p>
<p>Remember that context lives <em>outside</em> your data.</p>
</div>
<h2 id="update-ticks">Update Ticks<a class="headerlink" href="#update-ticks" title="Permanent link"></a></h2>
<p>As a convenience, StardewUI can dispatch update ticks to any objects bound as context so that you do not need to "drive" them from <code>ModEntry</code>, i.e. using SMAPI's <a href="https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Events#Game_loop">UpdateTicked</a> event.</p>
<p>Importantly, these updates can be at any arbitrary nesting level, as long as they are reachable by some view/node; they do not have to be at the top level. This can be useful for running animations, synchronizing with external game state or netfields, or for any other purpose that requires frame-precision updates.</p>
<p>To opt in, simply add a <code>void Update</code> method to any context type with either no parameters or a single <code>TimeSpan</code> parameter.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="code-c" name="__tabbed_7" type="radio"/><input id="view-starml" name="__tabbed_7" type="radio"/><div class="tabbed-labels"><label for="code-c">Code (C#)</label><label for="view-starml">View (StarML)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-cs highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">OuterModel</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p">{</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">StopwatchModel</span><span class="w"> </span><span class="n">Stopwatch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="p">}</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">InnerModel</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="p">{</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">FormattedTime</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Elapsed</span><span class="p">.</span><span class="n">ToString</span><span class="p">(</span><span class="s">@"mm\:ss\.fff"</span><span class="p">);</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="na">[Notify]</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="n">TimeSpan</span><span class="w"> </span><span class="n">elapsed</span><span class="p">;</span>
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a>
</span><span id="__span-11-12"><a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Update</span><span class="p">(</span><span class="n">TimeSpan</span><span class="w"> </span><span class="n">elapsed</span><span class="p">)</span>
</span><span id="__span-11-13"><a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-11-14"><a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">        </span><span class="n">Elapsed</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">elapsed</span><span class="p">;</span>
</span><span id="__span-11-15"><a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-11-16"><a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-html highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="p">&lt;</span><span class="nt">frame</span> <span class="err">*</span><span class="na">context</span><span class="o">=</span><span class="s">{Stopwatch}</span><span class="p">&gt;</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">text</span><span class="o">=</span><span class="s">{FormattedTime}</span> <span class="p">/&gt;</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="p">&lt;/</span><span class="nt">frame</span><span class="p">&gt;</span>
</span></code></pre></div>
</div>
</div>
</div>
</div>
<p>The <code>Update</code> method <strong>must</strong> match the signature above (with or without the <code>TimeSpan</code> argument); any other signature will cause a warning to be logged and the method to be ignored.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>Fody is <a href="https://github.com/Fody/Home/blob/master/pages/licensing-patron-faq.md#but-it-is-mit-cant-i-use-it-for-free">"legally free, morally paid"</a>, but the advantages of this clearly show in its maintenance statistics; <code>PropertyChanged</code> is over 12 years old, still being updated, and has the most frictionless syntax, in addition to the Fody master project being a much larger collection of also useful tools. <a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Stardew Markup Language (StarML)" class="md-footer__link md-footer__link--prev" href="../starml/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Stardew Markup Language (StarML)
              </div>
</div>
</a>
<a aria-label="Next: Binding Events" class="md-footer__link md-footer__link--next" href="../binding-events/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Binding Events
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/focustense" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://next.nexusmods.com/profile/focustense/mods?gameId=1303" rel="noopener" target="_blank" title="next.nexusmods.com">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.376 0c-.993 0-2.18.686-2.907 1.182-1.676-.36-4.036-.545-6.787.635-1.365-.513-2.425-.562-3.32-.488a2.16 2.16 0 0 0-1.27.429c-.33.22-2.788 2.69-3.069 4.652C-.15 7.508.68 8.932 1.218 9.718c-.44 1.76-.2 4.572.517 6.188-.353 1.041-.713 2.089-.664 3.205.01.584.061 1.188.398 1.684C1.72 21.19 4.528 24 6.545 24c.957 0 1.93-.428 3.07-1.24 2.16.383 4.402.348 6.448-.532 2.573 1.001 4.224.625 4.84.162.587-.457 2.826-2.915 3.07-4.622.1-.672-.023-1.638-1.226-3.397a11 11 0 0 0-.501-6.455c.396-1.069.673-2.188.59-3.337-.015-.68-.221-1.167-.487-1.507-.209-.335-2.415-2.39-4.028-2.91A3.1 3.1 0 0 0 17.376 0m-.03 2.082c.65.015 2.155 1.093 3.01 1.906l.355.34c-.959-.163-2.125.428-3.26 1.55a10.3 10.3 0 0 0-1.358 1.595c-.28.384-.517.768-.753 1.285l1.18.635-3.895 1.477-1.122-4.18 1.033.547c1.358-3.102 2.524-3.973 3.232-4.416h.015a5.1 5.1 0 0 1 1.49-.724zM12 3.065a9 9 0 0 1 2.22.279 8 8 0 0 0-.42.488 8.4 8.4 0 0 0-1.8-.196 8.34 8.34 0 0 0-5.897 2.432 8 8 0 0 1-.37-.433A8.9 8.9 0 0 1 12 3.065m-7.076.305c.71-.002 1.309.127 2.2.466a9.5 9.5 0 0 0-1.713 1.337c-.327-.542-.624-1.156-.488-1.803m-.606.042c-.162.96.428 2.126 1.55 3.264.457.487 1.003.945 1.594 1.358.383.281.767.517 1.283.754l.62-1.182 1.49 3.914-4.176 1.122.546-1.033c-3.099-1.36-3.969-2.526-4.412-3.235v-.015a5.1 5.1 0 0 1-.723-1.491l-.015-.074c.015-.65 1.092-2.156 1.904-3.013Zm16.035 1.483a1.3 1.3 0 0 1 .26.015l.14.023a5 5 0 0 1-.13 1.137v.015q-.152.574-.377 1.148a9.5 9.5 0 0 0-1.346-1.776c.547-.357 1.051-.546 1.453-.562M18.43 5.8a8.9 8.9 0 0 1 2.506 6.2 9 9 0 0 1-.27 2.183 8 8 0 0 0-.488-.425A8.4 8.4 0 0 0 20.364 12 8.33 8.33 0 0 0 18 6.173a8 8 0 0 1 .429-.373M3.315 9.905q.235.222.488.425A8.4 8.4 0 0 0 3.636 12c0 2.248.887 4.286 2.327 5.788a8 8 0 0 1-.426.376A8.9 8.9 0 0 1 3.065 12a9 9 0 0 1 .25-2.095m13.988 1.541-.546 1.034c3.098 1.359 3.969 2.526 4.412 3.235v.014c.34.488.575.99.723 1.492l.014.074c-.014.65-1.092 2.156-1.903 3.013l-.34.354c.163-.96-.427-2.127-1.549-3.264a10.3 10.3 0 0 0-1.594-1.359 7 7 0 0 0-1.283-.753l-.605 1.152-1.505-3.87zm-6.006 1.684 1.121 4.18-1.033-.547c-1.357 3.102-2.523 3.973-3.231 4.416h-.015c-.487.34-.989.576-1.49.724l-.074.015c-.65-.015-2.154-1.093-3.01-1.906l-.354-.34c.959.163 2.124-.428 3.26-1.55.488-.458.945-1.004 1.358-1.595.28-.384.517-.768.753-1.285l-1.166-.635ZM3.72 16.663A9.5 9.5 0 0 0 5.086 18.5c-.697.47-1.33.665-1.777.59l-.138-.024c0-.367.038-.748.128-1.137v-.015c.11-.417.254-.835.42-1.252m14.131 1.314q.194.21.372.43A8.9 8.9 0 0 1 12 20.936a9 9 0 0 1-2.282-.296 8 8 0 0 0 .417-.487 8.34 8.34 0 0 0 7.716-2.175m.696.889c.43.666.607 1.267.534 1.698l-.023.138a5 5 0 0 1-1.136-.128h-.014a11 11 0 0 1-1.114-.366 9.5 9.5 0 0 0 1.753-1.342"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.tooltips", "navigation.footer", "navigation.indexes", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>